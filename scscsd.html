<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CSS Grid Gallery</title>
    <!-- remix icon -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet" />
    <!-- remix icon -->

    <!-- bootstrap cdn -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- bootstrap cdn -->

    <!-- bootstrap js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <!-- bootstrap js -->

    <!-- bootstrap icon -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <!-- bootstrap icon -->

    <!-- gsap -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/locomotive-scroll@4.1.4/dist/locomotive-scroll.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollSmoother.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/MotionPathPlugin.min.js"></script>

    <!-- gsap -->

    <!-- slick css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.min.css"
        integrity="sha512-yHknP1/AwR+yx26cB1y0cjvQUMvEa2PFzt1c9LlS4pRQ5NOTZFWbhBig+X9G9eYW/8m0/4OXNx8pxJ6z57x0dw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- slick css -->

    <!-- jquery CDN -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- jquery CDN -->

    <!-- aos css -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!-- aos css-->

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css"
        integrity="sha512-5Hs3dF2AEPkpNAR7UiOHba+lRSJNeM2ECkwxUIxC1Q/FLycGTbNapWXB4tP889k5T5Ju8fs4b1P5z/iB4nMfSQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- animate css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <!-- animate css -->

    <!-- Font Awesome Pro -->
    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.4.2/css/all.css">
    <link rel="stylesheet" href="scscsd.css" />
</head>

<body>
    <!-- menu-bar -->
    <section>
        <div class="menu-bar">
            <div class="menu-close-main">
                <a id="menu-close-btn" href=""><i class="fa-thin fa-circle-xmark"></i></a>
            </div>
        </div>
    </section>
    <!-- menu-bar -->


    <!-- Navbar (Persistent) -->
    <div class="navbar-main">
        <div class="container-fluid">
            <div class="row py-4 d-flex justify-content-center align-items-center">
                <div class="col-lg-4 col-md-11 col-10 d-flex justify-content-center">
                    <a class="logo mb-0 text-dark" href="">Arihant Studio</a>

                </div>
                <div class="col-lg-4 d-lg-block d-md-none d-none ">
                    <ul class="d-flex justify-content-center gap-5 mb-0 ms-5 navigation">
                        <li><a class="text-dark" href="./index.html">Home</a></li>
                        <li><a class="text-dark" href="">About</a></li>
                        <li><a class="text-dark" href="">Portfolio</a></li>
                        <li><a class="text-dark" href="">Contact</a></li>
                    </ul>
                </div>
                <div class="col-lg-4 col-md-1 col-1">
                    <ul class="d-lg-flex d-md-none d-none justify-content-end gap-3 mb-0 me-4 social-links">
                        <li><a class="text-dark" href=""><i class="fa-brands fa-instagram"></i></a></li>
                        <li><a class="text-dark" href=""><i class="fa-brands fa-whatsapp"></i></a></li>
                        <li><a class="text-dark" href=""><i class="fa-brands fa-facebook-f"></i></a></li>
                    </ul>
                    <div class="anchor d-lg-none">
                        <a id="menu-btn" href=""><i class="mb-0 text-dark ri-menu-3-line"></i></a>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <div class="gallery"> <!-- 1 -->
        <img class="four-grid-cells" src="./imgaes/gallery-1.jpg" onclick="openLightbox(0)" />

        <img src="./imgaes/gallery-2.jpg" onclick="openLightbox(1)" />

        <img class="wide-image" src="./imgaes/gallery-3.jpg" onclick="openLightbox(2)" />
        <!-- 2 -->
        <img src="./imgaes/gallery-8.jpg" />

        <img src="./imgaes/gallery-5.jpg" />

        <img class="wide-image" src="./imgaes/gallery-7.jpg" />

        <img src="./imgaes/gallery-10.jpg" />


        <!-- 3 -->
        <img class="wide-image" src="./imgaes/gallery-8.jpg " />

        <img class="four-grid-cells" src="./imgaes/flower-bg-img.jpg" />

        <img src="./imgaes/gallery-5.jpg" />

        <!-- 4-->
        <img src="./imgaes/gallery-12.jpg" />

        <img src="./imgaes/gallery-9.jpg" />

        <img class="wide-image" src="./imgaes/couple.jpg" />

        <img src="./imgaes/gallery-14.jpg" />


    </div>

    <div class="lightbox" id="lightbox">
        <span class="close" onclick="closeLightbox()"><i class="fa-sharp-duotone fa-thin fa-xmark"></i></span>
        <span class="prev" onclick="changeImage(-1)"><i class="fa-sharp-duotone fa-thin fa-arrow-left"></i></span>
        <img id="lightbox-img" src="">
        <span class="next" onclick="changeImage(1)"><i class="fa-sharp-duotone fa-thin fa-arrow-right"></i></span>
    </div>


    <script>
        let images = document.querySelectorAll('.gallery img');
        let lightbox = document.getElementById('lightbox');
        let lightboxImg = document.getElementById('lightbox-img');
        let currentIndex = 0;
        let startX = 0;

        function openLightbox(imgElement) {
            let imageArray = Array.from(images);
            currentIndex = imageArray.indexOf(imgElement);
            lightboxImg.src = imgElement.src;
            lightboxImg.style.width = 'auto';
            lightboxImg.style.height = 'auto';
            lightbox.style.display = 'flex';
            document.body.style.overflow = 'hidden'; // Disable scrolling on body

            // Enable backdrop
            lightboxImg.classList.remove('fade');
            lightboxImg.classList.add('fade');

            // Hide navbar when lightbox is open
            document.querySelector(".navbar-main").style.display = "none";

            // Add scroll event listener to remove image on scroll
            window.addEventListener('scroll', handleScroll);
        }

        function closeLightbox() {
            const lightbox = document.getElementById("lightbox"); // Select lightbox
            const closeBtn = document.querySelector(".close"); // Select close button

            // Add fade-out effect
            closeBtn.classList.add("fade-out");
            lightbox.classList.add("fade-out");

            setTimeout(() => {
                lightbox.style.display = "none"; // Hide lightbox after transition
                closeBtn.classList.remove("fade-out"); // Remove class for future clicks
                lightbox.classList.remove("fade-out");
            }, 300); // Match transition duration (0.3s)
        }



        // Function to handle scroll and remove image
        function handleScroll() {
            // Log for debugging
            console.log('Scroll detected!');

            // Remove image and close lightbox
            lightboxImg.src = ''; // Remove the image source
            closeLightbox(); // Close the lightbox
        }

        // Navigation buttons
        function changeImage(direction) {
            let imageArray = Array.from(images);
            currentIndex += direction;
            if (currentIndex < 0) currentIndex = imageArray.length - 1;
            if (currentIndex >= imageArray.length) currentIndex = 0;
            lightboxImg.classList.add('fade');
            setTimeout(() => {
                lightboxImg.src = imageArray[currentIndex].src;
                lightboxImg.classList.remove('fade');
            }, 300);
        }

        lightbox.addEventListener("touchstart", function (e) {
            startX = e.touches[0].clientX;
        });

        lightbox.addEventListener("touchmove", function (e) {
            let endX = e.touches[0].clientX;
            let diffX = startX - endX;

            if (Math.abs(diffX) > 50) {
                if (diffX > 0) {
                    changeImage(1);
                } else {
                    changeImage(-1);
                }
                startX = endX;
            }
        });

        images.forEach(img => {
            img.addEventListener('click', function () {
                openLightbox(this);
            });
        });

        document.addEventListener('keydown', function (e) {
            if (lightbox.style.display === 'flex') {
                if (e.key === 'ArrowRight') {
                    changeImage(1);
                } else if (e.key === 'ArrowLeft') {
                    changeImage(-1);
                }
            }
        });

        function openLightbox(index) {
            currentIndex = index;
            lightbox.style.display = 'flex';

            // Reset opacity immediately before applying animation
            lightboxImg.style.opacity = '0';

            updateLightboxImage();

            // Apply fade-in effect after a slight delay to ensure reflow
            setTimeout(() => {
                lightboxImg.classList.add('fade-in');
            }, 10); // Short delay to trigger animation
        }

        document.addEventListener('keydown', function (e) {
            if (lightbox.style.display === 'flex') {
                if (e.key === 'Escape') {
                    lightboxImg.classList.add('fade-out');

                    setTimeout(() => {
                        lightbox.style.display = 'none';
                        lightboxImg.classList.remove('fade-out', 'fade-in'); // Remove both classes
                    }, 300); // Match CSS transition time
                }
            }
        });




    </script>

    <!-- navbar script -->
    <script>
        function openLightbox(imgElement) {
            let imageArray = Array.from(images);
            currentIndex = imageArray.indexOf(imgElement);
            lightboxImg.src = imgElement.src;
            lightboxImg.style.width = 'auto';
            lightboxImg.style.height = 'auto';
            lightbox.style.display = 'flex';
            document.body.style.overflow = 'hidden';

            // Hide navbar when lightbox is open
            document.querySelector(".navbar-main").style.display = "none";
        }

        function closeLightbox() {
            lightbox.style.display = 'none';
            document.body.style.overflow = 'auto';

            // Show navbar when lightbox is closed
            document.querySelector(".navbar-main").style.display = "block";
        }
    </script>
    <!-- navbar script -->

    <!-- gsap -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            gsap.from(".gallery img", {
                opacity: 0,
                scale: 0.8,
                y: 50,
                duration: 1,
                stagger: 0.2, // Stagger effect (each image appears one after another)
                ease: "power2.out",
            });
        });

    </script>
    <!-- gsap -->

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</body>

</html>